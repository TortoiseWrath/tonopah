<!DOCTYPE html>
<meta charset="UTF-8">
<title>Page Title</title>
<script type="module">
	import * as Vue from 'https://unpkg.com/vue@3/dist/vue.runtime.esm-browser.prod.js'
	import { loadModule } from 'https://cdn.jsdelivr.net/npm/vue3-sfc-loader@0.7.3/dist/vue3-sfc-loader.esm.js'

	const options = {
		moduleCache: {
			vue: Vue
		},
		async getFile(url) {
			console.log('get');
			const res = await fetch(url);
			if (!res.ok) {
				throw Object.assign(new Error(res.statusText + ' ' + url), {res});
			}
			return await res.text();
		},
		addStyle(textContent) {
			const style = Object.assign(document.createElement('style'), {textContent});
			const ref = document.head.getElementsByTagName('style')[0] || null;
			document.head.insertBefore(style, ref);
		},
	};

	Vue.createApp(Vue.defineAsyncComponent(() => loadModule('./components/TestApp.vue', options))).mount(document.body);
</script>